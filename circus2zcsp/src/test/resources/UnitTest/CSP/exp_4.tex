% function 

\begin{zsection}
  \SECTION\ exp\_4 \parents\ circus\_toolkit
\end{zsection}

\begin{zed}
	T == 0 .. 3 \\
	TT == 4 .. 7 \\
	FT1 == T \fun TT \\
	FT2 == T \pfun TT \\
	FT3 == T \pinj TT \\
	FT4 == T \inj TT \\
	FT5 == T \psurj TT \\
	FT6 == T \surj TT \\
	FT7 == T \bij TT \\
	FT8 == T \ffun TT \\
	FT9 == T \finj TT \\
\end{zed}

\begin{circus}
	\circchannel\ c1: T \\
\end{circus}

\begin{circus}
    \circprocess\ P \circdef \circbegin \\
        \t1 \circstate\ State == [~ v: FT1 | true ~] \\
        \t1 Init ~~==~~ [~ (State)' | v' = \{0 \mapsto 4\} ~] \\
        \t1 Read \circdef \circvar f:FT1 \circspot \lcircguard (f(0) = 4) \rcircguard \circguard c1?x  \then \Skip \\
        \t1 Write \circdef \circvar f:FT2 \circspot \lcircguard f(1) = 3 \rcircguard \circguard \Skip \\
        \t1 \circspot \lschexpract Init \rschexpract \circseq (\circmu X \circspot (Read \extchoice Write) \circseq X) \\ 
	\circend
\end{circus}

